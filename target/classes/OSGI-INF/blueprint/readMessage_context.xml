<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
       xmlns:camel="http://camel.apache.org/schema/blueprint"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd
       http://camel.apache.org/schema/blueprint http://camel.apache.org/schema/blueprint/camel-blueprint.xsd">

 <camelContext trace="false" id="readMessage" xmlns="http://camel.apache.org/schema/blueprint">
  <route id="readMessageRoute">
    <from uri="rabbitmq://localhost/EMPLOYEE?autoAck=true"/>
    <setHeader headerName="Exchange.HTTP_METHOD">
      <constant>PUT</constant>
    </setHeader>
    <setHeader headerName="Exchange.CONTENT_TYPE">
      <constant>application/x-www-form-urlencoded</constant>
    </setHeader>
    <setHeader headerName="Exchange.HTTP_URI">
      <constant>http://localhost:8080</constant>
    </setHeader>
    <setHeader headerName="Exchange.HTTP_PATH">
      <constant>message</constant>
    </setHeader>
    <setBody>
       <simple>{ "id":1,"title":"test title","content":"${body}" }</simple>
    </setBody>
    
    <to uri="jetty://http://localhost:8080/message" id="_to1"/>
  </route>
</camelContext>

</blueprint>